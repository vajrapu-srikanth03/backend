pipeline {
    agent any

    environment {
    appVersion=''
    }
    stages {
        stage('checkout') {
            steps {
                
                sh 'git --version'
                git branch: 'main', url: 'https://github.com/vajrapu-srikanth03/backend.git'
            }
        }
        stage('Read the version') {
            steps {
                script {
                    def packageJson = readJSON file: 'package.json'
                    appVersion = packageJson.version
                    echo $appVersion
                }
            }
        } 
         
    }
}

stage('Read the version') {
            steps {
                script {
                    def props = readJSON file: 'package.json'
                    appVersion = props.version
                    echo "App version: ${appVersion}"
                    echo "${JOB_BASE_NAME}"
                }
            }
        }  